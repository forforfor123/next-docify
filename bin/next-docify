#!/usr/bin/env node
'use strict';

const spawn = require('cross-spawn');
const program = require('commander');
const pkg = require('../package.json');

const { version } = pkg;

program
  .version(version, '-v, --version')
  .usage('<cmd> [options]')
  .arguments('<cmd>')
  .command('export', 'exports static application')
  .action(function (cmd) {
    const args = process.argv.slice(3);

    const nextCmd = cmd || 'dev';

    process.env.NODE_ENV = nextCmd === 'dev' ? 'development' : 'production';
    const script = require.resolve('./' + cmd);

    spawn.sync(
      'babel-node',
      [script, ...args],
      { stdio: 'inherit' }
    )
  });

program.parse(process.argv);
